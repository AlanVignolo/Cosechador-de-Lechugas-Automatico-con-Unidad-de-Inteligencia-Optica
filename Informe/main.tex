\documentclass[a4paper,12pt]{report}
\usepackage[
  a4paper,
  margin=1.5cm,
  top=82pt,
  headheight=42pt,
]{geometry}

% Paquetes
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{amsmath,eqparbox}
\usepackage[utf8]{inputenc}   % Entrada: codificación UTF-8 (acentos en el código)
\usepackage[T1]{fontenc}      % Salida: codificación de fuentes
\usepackage[spanish]{babel}   % Traducciones y separación silábica
\usepackage{array}
\usepackage{bm}
\usepackage{blindtext}
\usepackage{caption}
\usepackage[makeroom]{cancel}
\usepackage{euscript}[mathcal]
\usepackage{enumitem}
\usepackage{fontenc}
\usepackage{gensymb}
\usepackage{graphicx}
\usepackage{lastpage}
\usepackage{multirow}
\usepackage{setspace}
\usepackage{titlesec}
\usepackage{xcolor}
\usepackage{float}
\usepackage{verbatim}
\usepackage{comment}
\usepackage{subcaption}
\usepackage{hyperref}
\usepackage{graphicx}
\DeclareGraphicsExtensions{.pdf,.png,.jpg}
\pdfminorversion=7

% Permitir compilación aunque falten imágenes
\makeatletter
\def\Gin@extensions{.pdf,.png,.jpg,.jpeg}
\let\Gin@setfile@orig\Gin@setfile
\def\Gin@setfile#1#2#3{%
  \IfFileExists{#3}{%
    \Gin@setfile@orig{#1}{#2}{#3}%
  }{%
    \fbox{\parbox{0.8\textwidth}{\centering\textbf{Imagen no encontrada:} \\ \texttt{#3}}}%
  }%
}
\makeatother

\excludecomment{debug}

% Renombrar figuras y tablas
\renewcommand{\figurename}{Fig.}
\renewcommand{\tablename}{Tabla}
\captionsetup{font=footnotesize}

% Cabecera y pie de página
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{}
\fancyhead[L]{UNCuyo - Ing. Mecatrónica \\ Mendoza - Argentina - 2025 \\ \hspace{0.1pt}}
\fancyhead[C]{317 - Autómatas y Control Discreto \\ \hspace{0.5pt} \\ \textbf{Proyecto Final de Estudios: Robot cosechador automático}}
\fancyhead[R]{Brenda Gudiño \\ Alan Vignolo \\ \hspace{0.5pt}}

\fancyfoot{}
\fancyfoot[R]{Página \thepage \hspace{2pt} de \pageref{LastPage}} 

\fancypagestyle{plain}{
\fancyhead{}
\fancyhead[L]{UNCuyo - Ing. Mecatrónica \\ Mendoza - Argentina - 2025 \\ \hspace{0.1pt}}
\fancyhead[C]{Proyecto final de estudios \\ \hspace{0.5pt} \\ \textbf{Robot cosechador automático}}
\fancyhead[R]{Brenda Gudiño \\ Alan Vignolo  \\ \hspace{0.5pt}}
\fancyfoot{}
\fancyfoot[R]{Página \thepage \hspace{2pt} de \pageref{LastPage}} 
}

% Formato de índice y capítulos
\renewcommand*\contentsname{Índice}
\titleformat{\chapter}[block]
  {\normalfont\huge\bfseries}{\thechapter.}{1em}{\Huge}
\titlespacing*{\chapter}{0pt}{0pt}{10pt}

% Portada
\title{
\includegraphics[scale = 0.3]{logo_uncuyo.png} \\ [2cm]
{\Huge \textbf{Proyecto Final de Estudios} \\ [1cm] 
Cosechador de Lechugas Autónomo con Unidad de Detección por Inteligencia Artificial}}
\author{Brenda Gudiño \\ Alan Vignolo}
\date{{Fecha de presentación: XX/XX/2025}}

\begin{document}
\setkeys{Gin}{draft=false}

\maketitle
\setcounter{tocdepth}{1}  % Mostrar solo capítulos y secciones (no subsecciones)
\tableofcontents
\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% RESUMEN
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter*{Resumen}
\addcontentsline{toc}{chapter}{Resumen}
\input{00_Resumen/resumen}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CAPÍTULO 1: INTRODUCCIÓN
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Introducción}

\section{Contexto y motivación}
\input{01_Introduccion/contexto_motivacion}
\newpage
\section{Objetivos del proyecto}
\input{01_Introduccion/objetivos}

\section{Alcance}
\input{01_Introduccion/alcance_limitaciones}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CAPÍTULO 2: MARCO TEÓRICO
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Marco teórico}

\section{Sistemas de control jerárquico}
\input{02_MarcoTeorico/2.1_control_jerarquico/Sist_control_jerarquico}

\section{Fundamentos de visión artificial e inteligencia artificial}
\input{02_MarcoTeorico/2.2_vision_ia/procesamiento_imagenes}
\input{02_MarcoTeorico/2.2_vision_ia/deteccion_bordes}
\input{02_MarcoTeorico/2.2_vision_ia/deteccion_contornos}
\input{02_MarcoTeorico/2.2_vision_ia/analisis_morfologico}
\input{02_MarcoTeorico/2.2_vision_ia/metricas_evaluacion}

\section{Estructuras cartesianas y robots serie}
\input{02_MarcoTeorico/2.3_cinematica/robots_Cartesianos_y_serie.tex}

\section{Sistemas de transmisión mecánica}
\input{02_MarcoTeorico/2.4_transmision/transmision.tex}

\section{Control de motores paso a paso}
\input{02_MarcoTeorico/2.5_motores/principio_funcionamiento}
%\input{02_MarcoTeorico/2.5_motores/modos_operacion}
%\input{02_MarcoTeorico/2.5_motores/drivers_electronica}
\section{Microcontroladores y comunicación}
\input{02_MarcoTeorico/2.6_Comunicacio_y_micros/com_y_micro}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CAPÍTULO 3: DESARROLLO DEL SISTEMA
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Desarrollo del sistema}

\section{Arquitectura general del sistema}
\input{03_Desarrollo/3.1_arquitectura_general/descr_gral}
\input{03_Desarrollo/3.1_arquitectura_general/interaccion_niveles}
\input{03_Desarrollo/3.1_arquitectura_general/flujo_informacion}
\input{03_Desarrollo/3.1_arquitectura_general/maquina_estados_global}

\section{Modelado y diseño mecánico}

\subsection{Especificaciones de diseño y restricciones}
\input{03_Desarrollo/3.2_modelado_mecanico/especificaciones_diseno}

%\subsection{Análisis Cinemático del Sistema}
%\input{03_Desarrollo/3.2_modelado_mecanico/grados_libertad}
%\input{03_Desarrollo/3.2_modelado_mecanico/ecuaciones_movimiento}
%\input{03_Desarrollo/3.2_modelado_mecanico/espacio_trabajo}

%\subsection{Diseño Estructural}
%\input{03_Desarrollo/3.2_modelado_mecanico/calculos_resistencia}
\subsection{Sistema de movimiento horizontal}
\input{03_Desarrollo/3.2_modelado_mecanico/Movimiento_Horizontal.tex}

%\input{03_Desarrollo/3.2_modelado_mecanico/calculo_cargas_horizontal}

\subsection{Sistema de movimiento vertical}
\input{03_Desarrollo/3.2_modelado_mecanico/Movimiento_Vertical.tex}

%\input{03_Desarrollo/3.2_modelado_mecanico/seleccion_guias}

\subsection{Robot serie}
\input{03_Desarrollo/3.2_modelado_mecanico/configuracion_brazo}
%\input{03_Desarrollo/3.2_modelado_mecanico/cinematicas.tex}
\input{03_Desarrollo/3.2_modelado_mecanico/dinámica_brazo.tex}
\input{03_Desarrollo/3.2_modelado_mecanico/seleccion_servos}
\input{03_Desarrollo/3.2_modelado_mecanico/gripper_real.tex}

\subsection{Modelado CAD}
%\input{03_Desarrollo/3.2_modelado_mecanico/diseno_piezas_3d}
\input{03_Desarrollo/3.2_modelado_mecanico/Modelado3D_real.tex}
%\input{03_Desarrollo/3.2_modelado_mecanico/tolerancias_ajustes}

\section{Selección de hardware y análisis energético}
\input{03_Desarrollo/3.3_seleccion_hardware/introduccion}

\input{03_Desarrollo/3.3_seleccion_hardware/drivers_potencia}
\input{03_Desarrollo/3.3_seleccion_hardware/camara}
\input{03_Desarrollo/3.3_seleccion_hardware/microcontrolador}
\input{03_Desarrollo/3.3_seleccion_hardware/computadora}
\input{03_Desarrollo/3.3_seleccion_hardware/reguladores_voltaje}
\input{03_Desarrollo/3.3_seleccion_hardware/analisis_energetico}

\section{Sistema de control de bajo nivel (nivel regulatorio)}

\subsection{Arquitectura del nivel regulatorio}
\input{03_Desarrollo/3.3_nivel_regulatorio/arquitectura_regulatorio}

% \subsection{Selección y Dimensionamiento de Actuadores}
% \input{03_Desarrollo/3.3_nivel_regulatorio/motores_paso_paso}
% \input{03_Desarrollo/3.3_nivel_regulatorio/drivers_tb6600}
% \input{03_Desarrollo/3.3_nivel_regulatorio/servomotores}

% \subsection{Sensores de Seguridad}
% \input{03_Desarrollo/3.3_nivel_regulatorio/finales_carrera}
% \input{03_Desarrollo/3.3_nivel_regulatorio/sistema_seguridad}

\subsection{Generación de trayectorias y control de movimiento}
\input{03_Desarrollo/3.3_nivel_regulatorio/generacion_trayectorias}
\input{03_Desarrollo/3.3_nivel_regulatorio/control_velocidad}
\input{03_Desarrollo/3.3_nivel_regulatorio/conversion_pasos_mm}

\subsection{Protocolo de comunicación UART}
\input{03_Desarrollo/3.3_nivel_regulatorio/estructura_comandos}
\input{03_Desarrollo/3.3_nivel_regulatorio/manejo_errores}

\section{Nivel supervisor}

\subsection{Arquitectura del software}
\input{03_Desarrollo/3.4_nivel_supervisor/arquitectura_supervisor}

\subsection{Funcionalidad y procesos}
\input{03_Desarrollo/3.4_nivel_supervisor/funcionalidad_procesos}

\subsection{Seguimiento de posición global}
\input{03_Desarrollo/3.4_nivel_supervisor/seguimiento_posicion}

\subsection{Control del brazo robótico}
\input{03_Desarrollo/3.4_nivel_supervisor/control_brazos}

\subsection{Manejo de errores y recuperación}
\input{03_Desarrollo/3.4_nivel_supervisor/manejo_errores}

\section{Inteligencia artificial y visión por computadora}

\subsection{Arquitectura y pipeline de procesamiento}
\input{03_Desarrollo/3.5_ia_vision/arquitectura_general}

\subsection{Detector de marcadores de referencia}
\input{03_Desarrollo/3.5_ia_vision/3.5.3_detector_marcadores/fundamento}
\input{03_Desarrollo/3.5_ia_vision/3.5.3_detector_marcadores/pipeline_procesamiento}
\input{03_Desarrollo/3.5_ia_vision/3.5.3_detector_marcadores/aplicaciones}
\input{03_Desarrollo/3.5_ia_vision/3.5.3_detector_marcadores/calibracion_resultados}

\subsection{Detector de tubos de cultivo}
\input{03_Desarrollo/3.5_ia_vision/3.5.4_detector_tubos/fundamento}
\input{03_Desarrollo/3.5_ia_vision/3.5.4_detector_tubos/pipeline_procesamiento}
\input{03_Desarrollo/3.5_ia_vision/3.5.4_detector_tubos/aplicacion_resultados}

\subsection{Clasificador de cultivos}
\input{03_Desarrollo/3.5_ia_vision/3.5.5_clasificador_cultivos/fundamento_pipeline}
\input{03_Desarrollo/3.5_ia_vision/3.5.5_clasificador_cultivos/analisis_estadistico_resultados}

\subsection{Mapeo y optimización de rutas}
\input{03_Desarrollo/3.5_ia_vision/mapeo_navegacion}
\input{03_Desarrollo/3.5_ia_vision/optimizacion_trayectorias}

%\input{03_Desarrollo/3.7_montaje/ensamblaje_mecanico}
%\input{03_Desarrollo/3.7_montaje/integracion_electronica}
%\input{03_Desarrollo/3.7_montaje/calibracion_puesta_marcha}
%\input{03_Desarrollo/3.7_montaje/problemas_soluciones}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CAPÍTULO 4: PRUEBAS Y RESULTADOS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Prototipo, pruebas y resultados}
\section{Diseño estructural y mecánico}
\input{04_Pruebas/4.1_estructura_y_mec/estr_y_mec.tex}
\input{04_Pruebas/4.1_estructura_y_mec/Sistema_mov_horizontal.tex}
\input{04_Pruebas/4.1_estructura_y_mec/Sistema_mov_vertical.tex}
\input{04_Pruebas/4.1_estructura_y_mec/Robot_serie.tex}
\input{04_Pruebas/4.1_estructura_y_mec/Modelado_3d.tex}
%\input{04_Pruebas/Sistema_movi_vertical}
%\input{03_Desarrollo/3.2_modelado_mecanico/Modelado_3d.tex}

%\section{Metodología de Pruebas}
%\input{04_Pruebas/4.1_metodologia/diseno_experimental}
%\input{04_Pruebas/4.1_metodologia/metricas_evaluacion}

\section{Pruebas}
\input{04_Pruebas/pruebas.tex}

\section{Análisis de resultados}
\input{04_Pruebas/4.6_analisis/comparacion_objetivos}
\input{04_Pruebas/4.6_analisis/limitaciones}
\input{04_Pruebas/4.6_analisis/mejoras_potenciales}

\chapter{Análisis de costos}
\input{06_Costos/Analisis_economico.tex}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CAPÍTULO 5: CONCLUSIONES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Conclusiones y trabajo futuro}

\section{Conclusiones generales}
\input{05_Conclusiones/5.1_conclusiones/logros_alcanzados}
\input{05_Conclusiones/5.1_conclusiones/cumplimiento_objetivos}
\input{05_Conclusiones/5.1_conclusiones/lecciones_aprendidas}

\section{Mejoras a futuro}
\input{05_Conclusiones/5.3_trabajo_futuro/mejoras_propuestas}
\input{05_Conclusiones/5.3_trabajo_futuro/escalabilidad}
\input{05_Conclusiones/5.3_trabajo_futuro/aplicaciones_potenciales}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ANEXOS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\appendix
\chapter{Diagramas Eléctricos Completos}
\input{Anexos/A_diagramas_electricos}

\chapter{Código Fuente Relevante}
\input{Anexos/B_codigo_fuente}

\chapter{Especificaciones Técnicas de Componentes}
\input{Anexos/C_especificaciones}

\chapter{Manual de Usuario}
\input{Anexos/D_manual_usuario}

\chapter{Hojas de Datos}
\input{Anexos/E_hojas_datos}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% REFERENCIAS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter*{Referencias}
\addcontentsline{toc}{chapter}{Referencias}
\input{Referencias/referencias}

\end{document}
