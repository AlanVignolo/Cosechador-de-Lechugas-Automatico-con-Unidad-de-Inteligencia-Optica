\subsubsection{Dimensionamiento de servomotores}

El brazo robótico diseñado para la cosecha de lechugas cuenta con dos grados de libertad, equivalentes a una articulación de hombro y una de codo. Para el dimensionamiento de los servomotores se utilizan las expresiones de torque obtenidas mediante el análisis dinámico por Euler-Lagrange, evaluadas en las configuraciones críticas de operación del sistema.

\paragraph{Parámetros del sistema}

Los parámetros físicos y operacionales del brazo robótico se detallan en la Tabla \ref{tab:parametros_brazo}.

\begin{table}[htbp]
\centering
\caption{Parámetros del brazo robótico}
\label{tab:parametros_brazo}
\begin{tabular}{lcc}
\hline
\textbf{Parámetro} & \textbf{Valor} & \textbf{Unidad} \\
\hline
Longitud total eslabón 1 ($L_1$) & 16 & cm \\
Longitud total eslabón 2 ($L_2$) & 12.5 & cm \\
Posición centro de masa eslabón 1 ($l_1$) & 16 & cm \\
Posición centro de masa eslabón 2 ($l_2$) & 12.5 & cm \\
Masa eslabón 1 ($m_1$) & 150 & g \\
Masa eslabón 2 + carga ($m_2$) & 550 & g \\
Momento de inercia eslabón 1 ($I_1$) & $3.2 \times 10^{-5}$ & kg·m$^2$ \\
Momento de inercia eslabón 2 ($I_2$) & $2.15 \times 10^{-5}$ & kg·m$^2$ \\
Velocidad angular máxima ($\omega_{\max}$) & 45 & $^{\circ}$/s \\
Tiempo de aceleración ($t_{ac}$) & 0.5 & s \\
\hline
\end{tabular}
\end{table}

Los momentos de inercia se calcularon considerando los eslabones como barras delgadas uniformes respecto a sus centros de masa: $I = \frac{1}{12}mL^2$.

Del análisis dinámico desarrollado previamente, se tienen las expresiones \ref{ec:torqueT1} (hombro) y \ref{ec:torqueT2}(codo) para los torques en cada articulación:

Estas ecuaciones capturan los efectos inerciales, de acoplamiento dinámico entre articulaciones, términos centrífugos y efectos gravitacionales.

\paragraph{Configuraciones críticas de análisis}

Para el dimensionamiento se consideran tres configuraciones críticas que representan las condiciones de carga más exigentes:

\begin{enumerate}
    \item \textbf{Configuración horizontal extendida:} $\theta_1 = 0°$, $\theta_2 = 0°$ (brazo completamente horizontal, máximo torque gravitacional)
    \item \textbf{Configuración de aceleración máxima:} Aceleración desde reposo con $\ddot{\theta}_1 = \ddot{\theta}_2 = \alpha = 1.57$ rad/s$^2$
    \item \textbf{Configuración de velocidad máxima:} Movimiento a velocidad constante $\omega_{\max} = 0.785$ rad/s con efectos centrífugos
\end{enumerate}

\subsubsection{Cálculo de torque para la articulación 2 (codo)}

\paragraph{Caso 1: Posición horizontal en reposo}

Configuración: $\theta_1 = 0°$, $\theta_2 = 0°$, $\dot{\theta}_1 = \dot{\theta}_2 = 0$, $\ddot{\theta}_1 = \ddot{\theta}_2 = 0$

La expresión de $\tau_2$ se reduce al término gravitacional:

\begin{equation}
\tau_{2,est} = gm_2l_2\cos(\theta_2) = 9.81 \cdot 0.55 \cdot 0.125 \cdot \cos(0°) = 0.674 \, \text{N·m}
\end{equation}

\paragraph{Caso 2: Aceleración máxima}

Configuración: $\theta_1 = 0°$, $\theta_2 = 0°$, $\dot{\theta}_1 = \dot{\theta}_2 = 0$, $\ddot{\theta}_1 = \ddot{\theta}_2 = 1.57$ rad/s$^2$

\begin{multline}
\tau_{2,din} = (m_2l_2^2 + I_2)\ddot{\theta}_2 + m_2L_1l_2\ddot{\theta}_1\cos(0) + gm_2l_2\cos(0)
%= (0.55 \cdot 0.125^2 + 2.15 \times 10^{-5}) \cdot 1.57 + 0.55 \cdot 0.16 \cdot 0.125 \cdot 1.57 + 0.674 \\
%= 8.59 \times 10^{-3} \cdot 1.57 + 1.1 \times 10^{-2} \cdot 1.57 + 0.674 \\
%= 0.0135 + 0.0173 + 0.674 
= 0.705 \, \text{N·m}
\end{multline}

\paragraph{Caso 3: Efectos centrífugos}

Configuración: $\theta_1 = 45°$, $\theta_2 = 45°$, $\dot{\theta}_1 = 0.785$ rad/s, $\ddot{\theta}_1 = \ddot{\theta}_2 = 0$

\begin{multline}
\tau_{2,cent} = m_2L_1l_2\dot{\theta}_1^2\sin(\theta_1 - \theta_2) + gm_2l_2\cos(\theta_2) 
%= 0.55 \cdot 0.16 \cdot 0.125 \cdot (0.785)^2 \cdot \sin(0°) + 9.81 \cdot 0.55 \cdot 0.125 \cdot \cos(45°) \\
%= 0 + 0.477 
= 0.477 \, \text{N·m}
\end{multline}

El torque máximo requerido para el codo es:

\begin{equation}
\tau_{2,max} = \max(0.674, 0.705, 0.477) = 0.705 \, \text{N·m}
\end{equation}

Aplicando un factor de seguridad de 1.5:

\begin{equation}
\tau_{2,req} = 1.5 \cdot 0.705 = 1.058 \, \text{N·m}
\end{equation}

\subsubsection{Cálculo de torque para la articulación 1 (hombro)}

\paragraph{Caso 1: Posición horizontal en reposo}

Configuración: $\theta_1 = 0°$, $\theta_2 = 0°$, $\dot{\theta}_1 = \dot{\theta}_2 = 0$, $\ddot{\theta}_1 = \ddot{\theta}_2 = 0$

\begin{equation}
\tau_{1,est} = g(m_1l_1 + m_2L_1)\cos(\theta_1) 
%= 9.81(0.15 \cdot 0.16 + 0.55 \cdot 0.16) \cdot \cos(0°) 
= 1.098 \, \text{N·m}
\end{equation}

\paragraph{Caso 2: Aceleración máxima}

Configuración: $\theta_1 = 0°$, $\theta_2 = 0°$, $\dot{\theta}_1 = \dot{\theta}_2 = 0$, $\ddot{\theta}_1 = \ddot{\theta}_2 = 1.57$ rad/s$^2$

\begin{multline}
\tau_{1,din} = (m_1l_1^2 + m_2L_1^2 + I_1)\ddot{\theta}_1 + m_2L_1l_2\ddot{\theta}_2\cos(0) + g(m_1l_1 + m_2L_1)\cos(0)
%= (0.15 \cdot 0.16^2 + 0.55 \cdot 0.16^2 + 3.2 \times 10^{-5}) \cdot 1.57 \\
%+ 0.55 \cdot 0.16 \cdot 0.125 \cdot 1.57 + 1.098 \\
%= (3.84 \times 10^{-3} + 1.408 \times 10^{-2} + 3.2 \times 10^{-5}) \cdot 1.57 + 1.73 \times 10^{-2} + 1.098 \\
%= 1.824 \times 10^{-2} \cdot 1.57 + 1.73 \times 10^{-2} + 1.098 \\
%= 0.0286 + 0.0173 + 1.098 
= 1.144 \, \text{N·m}
\end{multline}

\paragraph{Caso 3: Efectos centrífugos}

Configuración: $\theta_1 = 0°$, $\theta_2 = 45°$, $\dot{\theta}_2 = 0.785$ rad/s, $\ddot{\theta}_1 = \ddot{\theta}_2 = 0$

\begin{multline}
\tau_{1,cent} = - m_2L_1l_2\dot{\theta}_2^2\sin(\theta_1 - \theta_2) + g(m_1l_1 + m_2L_1)\cos(\theta_1)
%= - 0.55 \cdot 0.16 \cdot 0.125 \cdot (0.785)^2 \cdot \sin(-45°) + 1.098 \\
%= - 1.1 \times 10^{-2} \cdot 0.616 \cdot (-0.707) + 1.098 \\
%= 4.78 \times 10^{-3} + 1.098 
= 1.103 \, \text{N·m}
\end{multline}

El torque máximo requerido para el hombro es:

\begin{equation}
\mathbf{\tau_{1,max}} = \max(1.098, 1.144, 1.103) = \mathbf{1.144 \, \textbf{N·m} }
\end{equation}

Aplicando un factor de seguridad de 1.5:

\begin{equation}
\mathbf{\tau_{1,req}} = 1.5 \cdot 1.144 = \mathbf{1.716 \, \textbf{N·m} }
\end{equation}

%\subsection{Resultados y Selección de Servomotores}

%La Tabla \ref{tab:resultados_torque_dinamica} resume los torques mínimos requeridos para cada articulación calculados mediante las ecuaciones de Euler-Lagrange.

%\begin{table}[H]
%\centering
%\caption{Torques calculados por análisis dinámico}
%\label{tab:resultados_torque_dinamica}
%\begin{tabular}{lccc}
%\hline
%\textbf{Articulación} & \textbf{Torque Máximo} & \textbf{Con Factor} & \textbf{Requerido} \\
% & \textbf{Calculado} & \textbf{de Seguridad 1.5} & \\
% & \textbf{(N·m)} & \textbf{(N·m)} & \textbf{(kg·cm)} \\
%\hline
%Codo (Articulación 2) & 0.705 & 1.058 & 107.9 \\
%Hombro (Articulación 1) & 1.144 & 1.716 & 175 \\
%\hline
%\end{tabular}
%\end{table}

%En base a estos requerimientos obtenidos del análisis dinámico riguroso, se proponen las siguientes opciones de servomotores:
Para ambos motores se selecciona un motor \textbf{Dynamixel MX-106T/R} que cuenta con un torque de 8N$\cdot$m a 12v y 5A, teniendo un margen de aproximadamente 8 veces para el codo y de aproximadamente 5 veces para el hombro.
%\textbf{Motor del codo (107.9 kg·cm):}
%\begin{itemize}
%    \item Dynamixel MX-106: 84 kg·cm @ 12V (requiere reducción mecánica 1.3:1 o considerar siguiente modelo)
%    \item Dynamixel MX-106T: 100 kg·cm @ 12V (cumple con margen ajustado)
%    \item Servo industrial digital de alta capacidad: torque nominal > 110 kg·cm
%    \item Sistema de reducción con servo estándar (relación 2:1 con servo de 55 kg·cm)
%\end{itemize}

%\textbf{Motor del hombro (175 kg·cm):}
%\begin{itemize}
%    \item Dynamixel MX-106: 84 kg·cm @ 12V (requiere reducción mecánica 2.1:1)
%    \item Servomotor industrial Nema 23 con reductor planetario (relación 3:1 o superior)
%    \item Sistema de poleas/engranajes con motor de menor torque (relación 4:1 o 5:1)
%    \item Servo de ultra alta capacidad o motor paso a paso con encoder (relación según especificaciones)
%\end{itemize}

%\subsubsection{Consideraciones de Diseño}

%El análisis mediante las ecuaciones de Euler-Lagrange proporciona una estimación más precisa de los torques requeridos al considerar:

%\begin{itemize}
%    \item \textbf{Acoplamiento dinámico}: Los términos cruzados capturan la influencia del movimiento de una articulación sobre la otra
 %   \item \textbf{Efectos inerciales}: Se consideran los momentos de inercia reales de los eslabones
  %  \item \textbf{Efectos centrífugos y de Coriolis}: Importantes cuando ambas articulaciones se mueven simultáneamente
   % \item \textbf{Configuración dependiente}: Los torques varían según la configuración angular del brazo
%\end{itemize}

%Los torques calculados mediante este método resultan menores que los obtenidos mediante aproximaciones simplificadas (punto masa), lo cual permite una selección más optimizada de actuadores sin sobredimensionamiento excesivo, manteniendo los márgenes de seguridad apropiados.
